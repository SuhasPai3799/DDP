process_rules_closing:
if (! (activity <= Closing)) return;

closing_proposed:
if (activity.status != "proposed") {
  activity.status = "proposed";
  propose("closing"){
    // "Nice to have met you" / "See you next time"
    String daType = firstEncounter() ? "InitialGoodbye" : "ReturnGoodbye";
    emitDA(#^daType(Meeting));
    user.hasActivity.add(currentSession);

    if (childAtHome()) {
      newActivity(new Idle);
    } else {
      newTimeout("EndSession", 35000);
    }
  }
}

/*old   propose("closing") {
  activity.put(CLOSING_PROPOSED, emitDA(#salutation("closing")));
  user.addToList(CHILD_SESSIONS, currentSession);
  reset();
  } */
